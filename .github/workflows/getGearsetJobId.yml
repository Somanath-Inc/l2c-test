name: Get PR Number

on:
    pull_request:
        types: [opened, synchronize, reopened]
        branches:
            - qa
                        
jobs:
    Get-Gearset-Job-ID:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout PR source branch
              uses: actions/checkout@v4
              with:
                ref: ${{ github.event.pull_request.head.ref }}
            - name: Get PR Number
              id: get_pr_number
              run: |
                echo ${{ github.event.pull_request.head.ref }}
                echo "pr_number=${{ github.event.pull_request.number }}" >> $GITHUB_ENV

            - name: Get Gearset Job ID
              env:
                GH_TOKEN: ${{ secrets.TOKEN }}
              run: |
                # Code Generated by Sidekick is for learning and experimentation purposes only.
                echo "PR Number: ${{ env.pr_number }}"
                gh pr checks ${{ env.pr_number }} --repo Somanathkl/l2c-test --json link


